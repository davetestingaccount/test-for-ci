name: Go Test

on: [pull_request]

jobs:
test:
runs-on: ubuntu-latest
steps:
  - uses: actions/checkout@vgit ./run.sh./run.sh2
  - name: Set up Docker Compose
run: docker-compose --version
  - name: Start Docker Compose
run: docker-compose up -d
  - name: Wait for services to start
run: sleep 10
  - name: Build and test with Docker Compose
run: docker-compose exec app go test ./...
  - name: Stop Docker Compose
run: docker-compose down